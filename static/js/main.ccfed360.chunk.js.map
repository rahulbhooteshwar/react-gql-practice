{"version":3,"sources":["Components/Posts.js","graphql/queries.js","Components/Loader.js","Components/Pagination.js","graphql/subscriptions.js","pages/Home.js","firebase.js","context/AuthContext.js","Components/Search.js","Components/Navbar.js","Components/forms/AuthForm.js","pages/auth/Register.js","graphql/mutations.js","pages/auth/Login.js","pages/auth/CompleteRegistration.js","pages/auth/ForgotPassword.js","Components/LoadingWithRedirect.js","Components/PrivateRoute.js","Components/forms/ProfileForm.js","Components/ImageManager.js","util/http.js","pages/Profile.js","pages/UpdatePassword.js","pages/UserPosts.js","pages/Dashboard.js","Components/PublicRoute.js","Components/UserCard.js","pages/Users.js","pages/SingleUser.js","Components/forms/CreateUpdatePostForm.js","pages/CreatePost.js","pages/ViewPost.js","pages/EditPost.js","pages/SearchResults.js","App.js","index.js","Components/Loader.module.css","graphql/fragments.js"],"names":["Posts","posts","showAuthor","colSize","deletePostHandler","editable","className","map","post","key","_id","style","height","to","src","image","url","alt","width","title","postedBy","username","name","onClick","gql","require","USER_INFO","POST_DATA","GET_POSTS_QUERY","TOTAL_POSTS","TOTAL_USER_POSTS","GET_CURRENT_USER_POSTS_QUERY","SINGLE_POST","SEARCH_POSTS","PROFILE_QUERY","ALL_USERS_QUERY","PUBLIC_PROFILE_QUERY","Loader","full","background","classes","loaderContainer","yellow","red","blue","violet","Pagination","page","pageSize","setPage","total","controls","Array","Math","ceil","fill","lowerLimit","upperLimit","length","disabled","_control","index","POST_ADDED","Home","useState","useSubscription","onSubscriptionData","client","cache","subscriptionData","data","refetchTotalPosts","refetchPosts","variables","useQuery","totalPostsQueryData","refetch","error","loading","useEffect","toast","message","totalPosts","allPosts","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","appId","measurementId","analytics","auth","googleAuthProvider","GoogleAuthProvider","firebaseReducer","state","action","type","user","payload","initialState","AuthContext","createContext","AuthProvider","children","setLoading","useReducer","dispatch","unsubscribe","onAuthStateChanged","a","getIdTokenResult","idTokenResult","email","token","value","Provider","Search","keyword","setKeyword","history","useHistory","onSubmit","e","preventDefault","push","onChange","target","placeholder","aria-label","Navbar","useContext","Fragment","data-toggle","data-target","aria-controls","aria-expanded","id","activeClassName","signOut","AuthForm","handleSubmit","setEmail","password","setPassword","showPassword","submitLabel","hideEmail","htmlFor","Register","done","setDone","config","process","handleCodeInApp","sendSignInLinkToEmail","success","window","localStorage","setItem","role","USER_CREATE","PROFILE_UPDATE","POST_CREATE","UPDATE_POST","DELETE_POST","Login","useMutation","createUser","signInWithEmailAndPassword","loginWithGoogle","signInWithPopup","CompleteRegistration","getItem","signInWithEmailLink","location","href","emailVerified","removeItem","currentUser","updatePassword","console","log","ForgotPassword","sendPasswordResetEmail","LoadingWithRedirect","countFrom","path","count","setCount","setTimeout","Date","PrivateRoute","rest","ProfileForm","profile","setProfile","profileLoading","about","rows","ImageManager","images","processingImage","resizeAndUploadHandler","deleteImageHandler","hidden","accept","public_id","cursor","includes","useAuthHttp","axios","create","baseURL","headers","Profile","http","setProcessingImage","profileLoadError","refetchQueries","query","updateProfile","useMemo","modified","omitDeep","input","filteredImages","filter","info","event","fileInput","files","Resizer","imageFileResizer","output","updatedImages","UpdatePassword","UserPosts","totalPostsByUserQueryData","update","reset","deletePost","totalPostsByUser","postsByCurrentUser","Dashboard","exact","PublicRoute","UserCard","defaultImage","firstImage","Users","allUsers","SingleUser","useParams","publicProfile","CreateUpdatePostForm","content","setTitle","setContent","setImage","FileResizer","CreatePost","createPost","ViewPost","singlePost","EditPost","submitting","setSubmitting","updatePost","SearchResults","searchPosts","App","wsLink","WebSocketLink","uri","options","reconnect","connectionParams","authtoken","httpLink","createHttpLink","authLink","setContext","_","link","split","definition","getMainDefinition","kind","operation","concat","ApolloClient","InMemoryCache","ApolloProvider","ReactDOM","render","StrictMode","basename","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.ccfed360.chunk.js","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nconst Posts = ({ posts, showAuthor = true, colSize = 3, deletePostHandler, editable = false }) => {\n  return <div className=\"row\">\n\n    {\n      posts.map((post) => {\n        return <div className={`col-md-${colSize} p-2`} key={`post-${post._id}`}>\n          <div className=\"card p-2\" style={{ height: '100%' }}>\n            <div className=\"card-body\">\n              <Link to={`/posts/${post._id}`}>\n                <img className=\"img-card-top\" src={post.image.url} alt=\"\" style={{ height: '100px', width: '300px' }} />\n                <h5 className=\"card-title\">\n                  {post.title}\n                </h5>\n              </Link>\n              <div className=\"card-text\">\n                {/* {post.content} */}\n                {\n                  showAuthor\n                    ? <div>\n\n                      <Link className=\"text-secondary strong\" to={`/users/${post.postedBy.username}`}>\n                        Author: {post.postedBy.name ? post.postedBy.name : post.postedBy.username}\n                      </Link>\n                    </div>\n                    : ''\n                }\n              </div>\n              <div>\n\n                {\n                  deletePostHandler\n                    ? <button onClick={() => deletePostHandler(post._id)} className=\"float-left btn btn-raised btn-danger\">Delete</button>\n                    : ''\n                }\n                {\n                  editable\n                    ? <Link to={`/edit-post/${post._id}`} className=\"float-right btn btn-raised btn-info\">Edit</Link>\n                    : ''\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      })\n    }\n  </div>\n}\n\nexport default Posts\n","const { gql } = require(\"@apollo/client\");\nconst { USER_INFO, POST_DATA } = require(\"./fragments\");\n\nexport const GET_POSTS_QUERY = gql`\nquery allPosts($page: Int, $pageSize: Int) {\n  allPosts(page: $page, pageSize: $pageSize) {\n   ...postData\n  }\n}\n${POST_DATA}\n`;\nexport const TOTAL_POSTS = gql`\nquery {\n  totalPosts\n}\n`\nexport const TOTAL_USER_POSTS = gql`\nquery {\n  totalPostsByUser\n}\n`\nexport const GET_CURRENT_USER_POSTS_QUERY = gql`\nquery postsByCurrentUser($page: Int, $pageSize: Int){\n  postsByCurrentUser(page: $page, pageSize: $pageSize) {\n    ...postData\n  }\n}\n${POST_DATA}\n`;\n\nexport const SINGLE_POST = gql`\nquery singlePost($_id: String!){\n  singlePost(_id: $_id) {\n    ...postData\n  }\n}\n${POST_DATA}\n`;\n\nexport const SEARCH_POSTS = gql`\nquery searchPosts($keyword: String!){\n  searchPosts(keyword:$keyword) {\n    ...postData\n  }\n}\n${POST_DATA}\n`;\nexport const PROFILE_QUERY = gql`\nquery {\n profile {\n   # using GQL fragment instead of directly specifying fields\n   ...userInfo\n  }\n}\n  ${USER_INFO}\n`\n\nexport const ALL_USERS_QUERY = gql`\nquery {\n  allUsers {\n    _id\n    username\n    about\n    images {\n      url\n    }\n  }\n}\n`\n\nexport const PUBLIC_PROFILE_QUERY = gql`\nquery publicProfile($username: String!){\n  publicProfile(username: $username) {\n    ...userInfo\n  }\n}\n${USER_INFO}`\n","import React from 'react'\nimport classes from \"./Loader.module.css\"\n\nconst Loader = ({ full, background }) => {\n  return (\n    <div className={background ? classes.background : ''}>\n      <div className={full ? classes.full : ''}>\n        <div className={classes.loaderContainer}>\n          <div className={classes.yellow}></div>\n          <div className={classes.red}></div>\n          <div className={classes.blue}></div>\n          <div className={classes.violet}></div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader\n","import React, { Fragment } from 'react'\n\nconst Pagination = ({ page, pageSize, setPage, total }) => {\n  const controls = Array(Math.ceil(total / pageSize)).fill(0)\n  const lowerLimit = ((page - 1) * pageSize) + 1\n  const upperLimit = lowerLimit + pageSize - 1\n  return (\n    <div>\n      {\n        controls.length > 1 ?\n          <Fragment>\n            <div>\n              Showing <strong>{lowerLimit} - {upperLimit <= total ? upperLimit : total}</strong> of {total}\n            </div>\n            <button disabled={page === 1} onClick={() => setPage(page - 1)} className={`mr-2 btn btn-warning btn-raised`}> Previous </button>\n            {\n              controls.map((_control, index) => {\n                return <button onClick={() => setPage(index + 1)} className={`btn ${index + 1 === page ? `btn-raised btn-success` : `btn-outline-success`}`} key={'control' + index}>{index + 1}</button>\n              })\n            }\n            <button disabled={page === controls.length} onClick={() => setPage(page + 1)} className={`ml-2 btn btn-warning btn-raised`}>Next</button>\n          </Fragment>\n          : ''\n      }\n\n    </div>\n  )\n}\n\nexport default Pagination\n","import { POST_DATA } from \"./fragments\";\n\nconst { gql } = require(\"@apollo/client\")\n\nexport const POST_ADDED = gql`\nsubscription {\n  postAdded {\n   ...postData\n  }\n}\n${POST_DATA}\n`;","import React, { useEffect, useState } from 'react'\nimport Posts from '../Components/Posts'\nimport { GET_POSTS_QUERY, TOTAL_POSTS } from '../graphql/queries'\nimport { useQuery, useSubscription } from '@apollo/client'\nimport Loader from '../Components/Loader'\nimport { toast } from 'react-toastify'\nimport Pagination from '../Components/Pagination'\nimport { POST_ADDED } from '../graphql/subscriptions'\nconst Home = () => {\n  const [page, setPage] = useState(1)\n  const pageSize = 8\n  useSubscription(POST_ADDED, {\n    onSubscriptionData: ({ client: { cache }, subscriptionData: { data } }) => {\n      // cache.reset()\n      refetchTotalPosts()\n      refetchPosts({\n        variables: page,\n        pageSize\n      })\n      // if (data && data.postAdded) {\n\n      //   toast.info('Update: New Post')\n      // }\n    }\n  })\n  const { data: totalPostsQueryData, refetch: refetchTotalPosts } = useQuery(TOTAL_POSTS)\n  const { data, error, loading, refetch: refetchPosts } = useQuery(GET_POSTS_QUERY, {\n    variables: {\n      page,\n      pageSize\n    }\n  });\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  return (\n    <div>\n      <h1>Home</h1>\n      {\n        totalPostsQueryData ? <Pagination total={totalPostsQueryData.totalPosts} page={page} pageSize={pageSize} setPage={setPage} /> : ''\n      }\n\n      {\n        loading\n          ? <Loader />\n          : data ? <Posts posts={data.allPosts}></Posts> : ''\n      }\n    </div >\n  )\n}\n\nexport default Home\n","import firebase from 'firebase';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAnN8yiImo8V6jCWBz5V5EXdkDujjI9OEo\",\n  authDomain: \"gql-react-node-udemy.firebaseapp.com\",\n  // databaseURL: \"https://gql-react-node-udemy.firebaseio.com\",\n  projectId: \"gql-react-node-udemy\",\n  storageBucket: \"gql-react-node-udemy.appspot.com\",\n  // messagingSenderId: \"660400582483\",\n  appId: \"1:660400582483:web:154b9c0912e81847467ba6\",\n  measurementId: \"G-BYEN4PKHEH\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\nexport default firebase;\nexport const auth = firebase.auth();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\n","import React, { useReducer, createContext, useEffect, useState } from 'react';\nimport { auth } from '../firebase';\nimport Loader from '../Components/Loader';\n\n// reducer\nconst firebaseReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGGED_IN_USER\":\n      return { ...state, user: action.payload };\n    default: return state;\n  }\n}\n//state\nconst initialState = {\n  user: null\n}\n// create context\nconst AuthContext = createContext();\n\n// context provider\nconst AuthProvider = ({ children }) => {\n  const [loading, setLoading] = useState(true);\n  const [state, dispatch] = useReducer(firebaseReducer, initialState);\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: { email: user.email, token: idTokenResult.token }\n        });\n        setLoading(false);\n      } else {\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: null\n        });\n        setLoading(false);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  const value = { state, dispatch };\n  return <AuthContext.Provider value={value}>{loading ? <Loader full background/>: children}</AuthContext.Provider>\n}\n// export\nexport { AuthProvider, AuthContext };","import React, { Fragment, useState } from 'react'\nimport { useHistory } from 'react-router';\n\nconst Search = () => {\n  const [keyword, setKeyword] = useState('');\n  const history = useHistory();\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    history.push(`/search/${keyword}`)\n  }\n  return (\n    <Fragment>\n      <form className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit}>\n        <input\n          value={keyword}\n          onChange={(e)=>setKeyword(e.target.value)}\n          className=\"form-control mr-sm-2 bg-light\" type=\"search\" placeholder=\"Search\" aria-label=\"Search\" />\n        <button className=\"btn btn-outline-light my-2 my-sm-0\" type=\"submit\">Search</button>\n      </form>\n    </Fragment>\n  )\n}\n\nexport default Search\n","import React, { useContext } from 'react'\nimport { Link, NavLink, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../context/AuthContext';\nimport { auth } from '../firebase';\nimport Search from './Search';\n\n\nconst Navbar = () => {\n  const { state, dispatch } = useContext(AuthContext);\n  const history = useHistory();\n  const { user } = state;\n  const logout = () => {\n    auth.signOut();\n    dispatch({\n      type: 'LOGGED_IN_USER',\n      payload: null\n    });\n    history.push('/login');\n  }\n  return (\n    <React.Fragment>\n      <nav className=\"navbar navbar-expand-lg navbar-light bg-success\">\n        <Link className=\"navbar-brand text-white\" to={\"/\"}>\n          My App\n        </Link>\n        <button className=\"navbar-toggler text-white\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon text-white\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"nav nav-tabs navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link text-white\" activeClassName=\"active\" to={\"/users\"}>Users <span className=\"sr-only\">(current)</span></NavLink>\n            </li>\n            {\n              user\n                ? <React.Fragment>\n\n                  <li className=\"nav-item\">\n                    <NavLink className=\"nav-link text-white\" activeClassName=\"active\" to={\"/dashboard\"}>Dashboard <span className=\"sr-only\">(current)</span></NavLink>\n                  </li>\n                  <li className=\"nav-item float-right\">\n                    <span style={{ 'cursor': 'pointer' }} className=\"nav-link text-white\" onClick={logout}> <span className=\"sr-only\">(current)</span>\n                    Logout\n                  </span>\n                  </li>\n                </React.Fragment>\n                : <React.Fragment>\n                  <li className=\"nav-item\">\n                    <NavLink className=\"nav-link text-white\" activeClassName=\"active\" to={\"/login\"}>Login <span className=\"sr-only\">(current)</span></NavLink>\n                  </li>\n                  <li className=\"nav-item\">\n                    <NavLink className=\"nav-link text-white\" activeClassName=\"active\" to={\"/register\"}>Register <span className=\"sr-only\">(current)</span></NavLink>\n                  </li>\n                </React.Fragment>\n            }\n\n          </ul>\n          <div className=\"ml-auto\">\n            <Search></Search>\n          </div>\n        </div>\n      </nav>\n    </React.Fragment>\n\n  )\n}\n\nexport default Navbar\n","import React from 'react'\n\nconst AuthForm = ({\n  handleSubmit,\n  email = '',\n  setEmail,\n  password = '',\n  setPassword,\n  loading,\n  showPassword = false,\n  submitLabel = 'Submit',\n  hideEmail = false,\n  children\n}) => {\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        {\n          !hideEmail\n\n            ? <div className=\"form-group\">\n              <label htmlFor=\"email\">Enter Email Address</label>\n              <input id=\"email\" type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                disabled={loading}\n                className=\"form-control\" />\n            </div>\n            : \"\"\n        }\n        {\n          showPassword\n            ? <div className=\"form-group\">\n              <label htmlFor=\"pasword\">Enter Password</label>\n              <input id=\"password\" type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                disabled={loading}\n                className=\"form-control\" />\n            </div>\n            : ''\n\n        }\n        <button disabled={loading || (!hideEmail && !email) || (showPassword && !password)} className=\"btn btn-outline-success \">\n          {!loading ? submitLabel : \"Please Wait...\"}\n        </button>\n        {children}\n      </form>\n    </div>\n  )\n}\n\nexport default AuthForm\n","import React, { useState } from 'react'\nimport { auth } from '../../firebase';\nimport { toast } from 'react-toastify';\nimport AuthForm from '../../Components/forms/AuthForm';\nimport Loader from '../../Components/Loader';\n\n\nconst Register = () => {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const config = {\n      url: process.env.REACT_APP_COMPLETE_REGISTRATION_URL,\n      handleCodeInApp: true\n    }\n    await auth.sendSignInLinkToEmail(email, config);\n    setLoading(false);\n    //show toast\n    toast.success(\"Please check your inbox for confirmation email!\")\n    // save user email in localstorage\n    window.localStorage.setItem('emailFromRegistration', email);\n    setEmail('');\n    setDone(true);\n  }\n  return (\n    <div className=\"p-5\">\n      <h4>Register</h4>\n      {loading\n        ? <Loader />\n        : done\n          ? <div className=\"alert alert-success\" role=\"alert\">\n            Check your email for completing Registration\n          </div>\n          : <AuthForm {...{ email, setEmail, loading, handleSubmit, submitLabel: 'Proceed' }} />}\n\n    </div>\n  )\n}\n\nexport default Register\n","const { gql } = require(\"@apollo/client\");\nconst { USER_INFO, POST_DATA } = require(\"./fragments\");\n\nexport const USER_CREATE = gql`\nmutation {\n  userCreate {\n    username\n  }\n}\n`;\n\nexport const PROFILE_UPDATE = gql`\nmutation userUpdate($input:UserUpdateInput!){\n  userUpdate(input: $input){\n    # using GQL fragment instead of directly specifying fields\n    ...userInfo\n  }\n}\n  ${USER_INFO}\n`\n\nexport const POST_CREATE = gql`\nmutation postCreate($input: PostCreateUpdateInput!) {\n  postCreate(input: $input) {\n   ...postData\n  }\n}\n${POST_DATA}\n`\nexport const UPDATE_POST = gql`\nmutation postUpdate($_id:String!, $input:PostCreateUpdateInput!){\n  postUpdate(_id: $_id, input: $input) {\n    ...postData\n  }\n}\n${POST_DATA}\n`;\n\n\nexport const DELETE_POST = gql`\nmutation postDelete($_id: String!){\n  postDelete(_id:$_id){\n    _id\n  }\n}\n\n`\n\n\n","import React, { useState, useContext, Fragment } from 'react'\nimport { useHistory } from 'react-router';\nimport { AuthContext } from '../../context/AuthContext';\nimport { auth, googleAuthProvider } from '../../firebase';\nimport { toast } from 'react-toastify';\nimport { useMutation } from '@apollo/client';\nimport AuthForm from '../../Components/forms/AuthForm';\nimport Loader from '../../Components/Loader';\nimport { Link } from 'react-router-dom';\nimport { USER_CREATE } from '../../graphql/mutations';\n\nconst Login = () => {\n  const [createUser] = useMutation(USER_CREATE);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const { dispatch } = useContext(AuthContext);\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const { user } = await auth.signInWithEmailAndPassword(email, password);\n      const idTokenResult = await user.getIdTokenResult();\n      dispatch({\n        type: 'LOGGED_IN_USER',\n        payload: { email: user.email, token: idTokenResult.token }\n      });\n      // send user info to server, update/create user\n      await createUser();\n      history.push('/dashboard');\n    } catch (error) {\n      toast.error(error.message);\n      setLoading(false);\n    }\n  }\n  const loginWithGoogle = async () => {\n    try {\n      setLoading(true)\n      const { user } = await auth.signInWithPopup(googleAuthProvider);\n      const idTokenResult = await user.getIdTokenResult();\n      dispatch({\n        type: 'LOGGED_IN_USER',\n        payload: { email: user.email, token: idTokenResult.token }\n      });\n      // send user info to server, update/create user\n      await createUser();\n      history.push('/dashboard');\n    } catch (error) {\n      toast.error(error.message);\n      setLoading(false);\n    }\n  }\n  return (\n    <div className=\"p-5\">\n      <h4>Login</h4>\n\n      {loading\n        ? <Loader full background/>\n        : <Fragment>\n          <button className=\"btn  btn-outline-danger mt-5\" onClick={loginWithGoogle}>\n            Login with Google\n          </button>\n          <div>Or</div>\n          <AuthForm {...{ email, password, setEmail, setPassword, loading, handleSubmit, submitLabel: 'Login using email & password', showPassword: true }} >\n            <Link to={\"/forgot-password\"}>\n              <button className=\"btn btn-outline-secondary\">Forgot Password</button>\n            </Link>\n          </AuthForm>\n        </Fragment>\n      }\n\n    </div>\n  )\n}\n\nexport default Login\n","import React, { useState, useEffect, useContext } from 'react'\nimport { auth } from '../../firebase';\nimport { toast } from 'react-toastify';\nimport { useHistory } from 'react-router';\nimport { AuthContext } from '../../context/AuthContext';\nimport { useMutation } from '@apollo/client';\nimport AuthForm from '../../Components/forms/AuthForm';\nimport Loader from '../../Components/Loader';\nimport { USER_CREATE } from '../../graphql/mutations';\n\nconst CompleteRegistration = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  const { dispatch } = useContext(AuthContext);\n  const [createUser] = useMutation(USER_CREATE);\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem('emailFromRegistration'))\n  }, [history])\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    if (!email || !password) {\n      toast.error(\"Email & Password is required\");\n      return;\n    }\n    try {\n      const result = await auth.signInWithEmailLink(email, window.location.href);\n      if (result.user.emailVerified) {\n        window.localStorage.removeItem('emailFromRegistration');\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: 'LOGGED_IN_USER',\n          payload: { email: user.email, token: idTokenResult.token }\n        });\n        // update the user in our DB\n        await createUser();\n        history.push('/dashboard')\n\n      } else {\n        toast.error(\"Email not verified\");\n      }\n    } catch (error) {\n      console.log('Error in registration completion', error.message);\n      setLoading(false);\n      toast.error(error.message);\n    }\n  }\n  return (\n    <div className=\"p-5\">\n      <h4>Complete Registration</h4>\n\n      {loading ? <Loader/> :<AuthForm {...{ email, password, setEmail, setPassword, loading, handleSubmit, submitLabel: 'Complete Registration', showPassword: true }}/>}\n\n    </div>\n  )\n}\n\nexport default CompleteRegistration\n","import React, { useState } from 'react'\nimport Loader from '../../Components/Loader';\nimport AuthForm from '../../Components/forms/AuthForm';\nimport { auth } from '../../firebase';\nimport { toast } from 'react-toastify';\n\nconst ForgotPassword = () => {\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const config = {\n      url: process.env.REACT_APP_CHANGE_PASSWORD_REDIRECT_URL\n    }\n    await auth.sendPasswordResetEmail(email, config);\n    setLoading(false);\n    //show toast\n    toast.success(\"Please check your inbox for password reset email!\")\n    setEmail('');\n    setDone(true);\n  }\n  return (\n    <div className=\"p-5\">\n      <h4>Forgot Password</h4>\n      {loading\n        ? <Loader />\n        : done\n          ? <div className=\"alert alert-success\" role=\"alert\">\n            Check your email for Password Reset Link\n          </div>\n          : <AuthForm {...{ email, setEmail, loading, handleSubmit, submitLabel: 'Proceed' }} />}\n    </div>\n  )\n}\n\nexport default ForgotPassword\n","import React, { useState, useEffect } from 'react'\nimport { useHistory } from 'react-router'\n\nconst LoadingWithRedirect = ({ countFrom, path }) => {\n  const history = useHistory();\n  const [count, setCount] = useState(countFrom)\n  useEffect(() => {\n    if (count === 0) {\n      history.push(path)\n    } else {\n\n      setTimeout(() => {\n        console.log('executed at', new Date())\n        setCount(count - 1)\n      }, 1000)\n    }\n\n  }, [count, history, path])\n  return (\n    <div className=\"p-5\">\n      Redirecting you in {count} seconds ...\n    </div>\n  )\n}\n\nexport default LoadingWithRedirect\n","import React, {  useContext, Fragment } from 'react'\nimport { AuthContext } from '../context/AuthContext'\nimport { Route } from 'react-router';\nimport LoadingWithRedirect from './LoadingWithRedirect';\n\nconst PrivateRoute = ({ children, ...rest }) => {\n  const { state } = useContext(AuthContext);\n  const { user } = state;\n  return (\n    <Fragment>\n      {user\n        ? <Route {...rest}>{children}</Route>\n        : <LoadingWithRedirect path='/login' countFrom='5'/>}\n    </Fragment>\n  )\n}\n\nexport default PrivateRoute\n","import React, { Fragment } from 'react'\n\nconst ProfileForm = ({handleSubmit, profile, setProfile, loading, profileLoading}) => {\n  return (\n    <Fragment>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username</label>\n          <input id=\"username\" type=\"text\"\n            value={profile.username}\n            onChange={(e) => setProfile({ ...profile, username: e.target.value })}\n            disabled={loading || profileLoading}\n            className=\"form-control text-white\" />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"name\">Name</label>\n          <input id=\"name\" type=\"text\"\n            value={profile.name}\n            onChange={(e) => setProfile({ ...profile, name: e.target.value })}\n            disabled={loading || profileLoading}\n            className=\"form-control text-white\" />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"email\">Email</label>\n          <input id=\"email\" type=\"text\"\n            value={profile.email}\n            onChange={(e) => setProfile({ ...profile, email: e.target.value })}\n            disabled\n            className=\"form-control\" />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"about\">About</label>\n          <textarea id=\"about\" type=\"text\"\n            value={profile.about}\n            onChange={(e) => setProfile({ ...profile, about: e.target.value })}\n            disabled={loading || profileLoading}\n            className=\"form-control text-white\"\n            rows=\"5\"\n          />\n        </div>\n        <button disabled={loading || profileLoading} className=\"btn btn-outline-success \">\n          {!loading ? 'Update' : \"Please Wait...\"}\n        </button>\n      </form>\n    </Fragment>\n  )\n}\n\nexport default ProfileForm\n","import React, { Fragment } from 'react'\n\nconst ImageManager = ({ images, processingImage, resizeAndUploadHandler, deleteImageHandler}) => {\n  return (\n    <Fragment>\n      <div className=\"form-group\">\n        {\n          processingImage\n            ? \"Please Wait...\"\n            : <label htmlFor=\"image\">\n              <span className=\"btn btn-default btn-raised\">Upload Image</span>\n              <input\n                hidden\n                type=\"file\"\n                id=\"image\"\n                accept=\"image/*\"\n                onChange={resizeAndUploadHandler}\n                placeholder=\"upload new image\"\n                className=\"form-control\" />\n            </label>\n        }\n      </div>\n      <div className=\"row\">\n        {\n          images.map(\n            image =>\n              <div className=\"col-md-3\" key={image.public_id}>\n                <div className=\"overlay-container\">\n                  <img style={{ height: '100px' }} src={image.url} alt={image.public_id} className=\"img-thumbnail float-right\"></img>\n                  <div className=\"overlay\">\n                    <div className=\"overlay-contents\">\n                      <button style={{ cursor: image.url.includes('placeholder') ? 'not-allowed' : 'pointer' }} disabled={image.url.includes('placeholder')} onClick={() => deleteImageHandler(image.public_id)} type=\"button\" className=\"btn btn-raised btn-success\">Delete</button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          )\n        }\n      </div>\n    </Fragment>\n  )\n}\n\nexport default ImageManager\n","import axios from 'axios'\nimport { useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\n// custom hook\nexport const useAuthHttp = () => {\n  const { state } = useContext(AuthContext)\n  return axios.create({\n    baseURL: process.env.REACT_APP_SERVER_URL,\n    headers: { 'authtoken': state.user.token }\n  });\n }","import React, { useMemo, useState, useEffect } from 'react'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { toast } from 'react-toastify'\nimport { PROFILE_QUERY, ALL_USERS_QUERY, GET_POSTS_QUERY } from '../graphql/queries'\nimport Loader from '../Components/Loader'\nimport { PROFILE_UPDATE } from '../graphql/mutations'\nimport Resizer from 'react-image-file-resizer'\nimport omitDeep from 'omit-deep-lodash'\nimport ProfileForm from '../Components/forms/ProfileForm'\nimport ImageManager from '../Components/ImageManager'\nimport { useAuthHttp } from '../util/http'\n\nconst Profile = () => {\n  const http = useAuthHttp();\n  const [profile, setProfile] = useState({\n    name: '',\n    username: '',\n    email: '',\n    about: '',\n    images: []\n  })\n  const [loading, setLoading] = useState(false)\n  const [processingImage, setProcessingImage] = useState(false)\n  const { data, loading: profileLoading, error: profileLoadError } = useQuery(PROFILE_QUERY)\n  const [updateProfile] = useMutation(PROFILE_UPDATE, {\n    refetchQueries: [{ query: PROFILE_QUERY }, { query: ALL_USERS_QUERY }, { query: GET_POSTS_QUERY }]\n  })\n  useEffect(() => {\n    if (profileLoadError) {\n      toast.error(profileLoadError.message)\n    }\n  }, [profileLoadError])\n  useMemo(() => {\n    if (data && data.profile) {\n      const modified = omitDeep(data, ['__typename'])\n      setProfile(\n        {\n          name: modified.profile.name,\n          username: modified.profile.username,\n          email: modified.profile.email,\n          about: modified.profile.about,\n          images: modified.profile.images\n        }\n      )\n    }\n  }, [data])\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    try {\n      await updateProfile(\n        {\n          variables: { input: { username: profile.username, name: profile.name, about: profile.about } }\n        }\n      )\n      toast.success('Profile Updated')\n      setLoading(false)\n    } catch (error) {\n      toast.error(error.message)\n      setLoading(false)\n    }\n  }\n  const resizeAndUploadHandler = (event) => {\n    setProcessingImage(true)\n    var fileInput = false\n    if (event.target.files[0]) {\n      fileInput = true\n    }\n    if (fileInput) {\n      Resizer.imageFileResizer(\n        event.target.files[0],\n        300,\n        300,\n        'JPEG',\n        100,\n        0,\n        async (output) => {\n          try {\n            const { data } = await http.post(`${process.env.REACT_APP_SERVER_URL}/uploadImages`,\n              { image: output })\n            const updatedImages = [...profile.images, data];\n            // update in DB\n            await updateProfile(\n              {\n                variables: { input: { images: updatedImages } }\n              }\n            )\n            // update on UI\n            setProfile({ ...profile, images: updatedImages })\n            toast.info('Uploaded')\n            setProcessingImage(false)\n          } catch (error) {\n            toast.error(error.message)\n            setProcessingImage(false)\n          }\n        },\n        'base64'\n      );\n    }\n  }\n\n  const deleteImageHandler = async (id) => {\n    setProcessingImage(true)\n    try {\n      const { data } = await http.post(`${process.env.REACT_APP_SERVER_URL}/removeImage`,\n        { public_id: id })\n      if (data.success) {\n        const filteredImages = profile.images.filter(image => {\n          return image.public_id !== id;\n        })\n        // update images in DB\n        await updateProfile(\n          {\n            variables: { input: { images: filteredImages } }\n          }\n        )\n        // update images on UI\n        setProfile({ ...profile, images: filteredImages })\n        toast.info('Deleted')\n      } else {\n        toast.error(data.error.message)\n      }\n      setProcessingImage(false)\n    } catch (error) {\n      toast.error(error.message)\n      setProcessingImage(false)\n    }\n  }\n\n  return (\n    <div>\n      {\n        profileLoading\n          ? <Loader /> :\n          <div className=\"row jumbotron\">\n            <div className=\"col-md-6 jumbotron bg-dark text-white border border-success\">\n              <ProfileForm {...{ handleSubmit, profile, setProfile, loading, profileLoading }} />\n            </div>\n            <div className=\"col-md-6 jumbotron bg-light\">\n              <ImageManager {...{ images: profile.images, processingImage, resizeAndUploadHandler, deleteImageHandler }} />\n            </div>\n          </div>\n      }\n    </div>\n  )\n}\n\nexport default Profile\n","import React, { useState } from 'react'\nimport AuthForm from '../Components/forms/AuthForm';\nimport { auth } from '../firebase';\nimport { toast } from 'react-toastify';\n\nconst UpdatePassword = () => {\n  const [password, setPassword] = useState();\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await auth.currentUser.updatePassword(password);\n      setLoading(false);\n      toast.success('Password Updated');\n    } catch (error) {\n      toast.error(error.message)\n    }\n\n\n  }\n  return (\n    <div>\n      <h4>\n        Update Password\n      </h4>\n      <AuthForm {...{password, setPassword, loading, handleSubmit, submitLabel: 'Update Password', showPassword: true, hideEmail: true }} >\n      </AuthForm>\n    </div>\n  )\n}\n\nexport default UpdatePassword\n","import React, { useEffect, useState, Fragment } from 'react'\nimport { GET_CURRENT_USER_POSTS_QUERY, TOTAL_USER_POSTS } from '../graphql/queries';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { toast } from 'react-toastify';\nimport Loader from '../Components/Loader';\nimport Posts from '../Components/Posts';\nimport { Link } from 'react-router-dom';\nimport { DELETE_POST } from '../graphql/mutations';\nimport Pagination from '../Components/Pagination';\n\nconst UserPosts = () => {\n  const [page, setPage] = useState(1)\n  const pageSize = 6\n  const { data: totalPostsByUserQueryData } = useQuery(TOTAL_USER_POSTS);\n\n  const { data, error, loading } = useQuery(GET_CURRENT_USER_POSTS_QUERY, {\n    variables: {\n      page, pageSize\n    }\n  });\n  const [deletePost] = useMutation(DELETE_POST, {\n    update: (cache) => {\n      cache.reset()\n    },\n    //  refetchQueries: [{query: TOTAL_POSTS}, {query: GET_POSTS_QUERY}, {query: GET_CURRENT_USER_POSTS_QUERY}]\n  })\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  const deletePostHandler = async (_id) => {\n    try {\n      await deletePost({\n        variables: {\n          _id: _id\n        }\n      })\n      toast.success('Deleted');\n    } catch (error) {\n      toast.error(error.message)\n    }\n  }\n  return (\n    <div>\n      <div className=\"row\">\n        <div className=\"col\">\n          <Link to={\"/create-post\"} className=\"btn btn-raised btn-success-outline float-right\">Create New Post</Link>\n        </div>\n      </div>\n      {\n        totalPostsByUserQueryData ? <Pagination total={totalPostsByUserQueryData.totalPostsByUser} page={page} pageSize={pageSize} setPage={setPage} /> : ''\n      }\n      {\n        loading\n          ? <Loader />\n          : <Fragment>\n\n            {\n              data\n                ? <Posts colSize={4} showAuthor={false} posts={data.postsByCurrentUser} deletePostHandler={deletePostHandler} editable></Posts>\n                : ''\n            }\n          </Fragment>\n      }\n    </div>\n  )\n}\n\nexport default UserPosts\n","import React from 'react'\nimport { NavLink, Switch, Route } from 'react-router-dom'\nimport Profile from './Profile'\nimport UpdatePassword from './UpdatePassword'\nimport UserPosts from './UserPosts'\n\nconst Dashboard = () => {\n  return (\n    <div className=\"row\">\n      <div className=\"col-3\">\n        <div className=\"list-group\">\n          <NavLink className=\"text-center btn-lg btn-link btn-success\" activeClassName=\"active\" to={`/dashboard`} exact>Profile</NavLink>\n          <NavLink className=\"text-center btn-lg btn-link btn-success\" activeClassName=\"active\" to={`/dashboard/update-password`}>Update Password</NavLink>\n          <NavLink className=\"text-center btn-lg btn-link btn-success\" activeClassName=\"active\" to={`/dashboard/user-posts`}>Posts</NavLink>\n        </div>\n      </div>\n      <div className=\"col-9\">\n        <div className=\"tab-content\">\n          <Switch>\n            <Route path={`/dashboard/update-password`}>\n              <UpdatePassword />\n            </Route>\n            <Route path={`/dashboard/user-posts`}>\n              <UserPosts/>\n            </Route>\n            <Route path={`/dashboard`}>\n              <Profile />\n            </Route>\n          </Switch>\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default Dashboard\n","import React, { useContext, useEffect } from 'react'\nimport { AuthContext } from '../context/AuthContext'\nimport { useHistory, Route } from 'react-router'\n\nconst PublicRoute = ({children, ...rest}) => {\n  const { state } = useContext(AuthContext)\n  const history = useHistory()\n  useEffect(() => {\n    if (state.user) {\n      history.push('/dashboard')\n    }\n  }, [state.user, history])\n  return (\n    <div>\n      <Route {...rest}>{children}</Route>\n    </div>\n  )\n}\n\n\nexport default PublicRoute\n","import React from 'react'\n\nconst UserCard = ({ user }) => {\n  const { username, about, images } = user\n  const [defaultImage, firstImage] = images\n  return (\n    <div className=\"card text-center\" style={{height: '100%', width: '200px'}}>\n      <div className=\"card-body\">\n        <img className=\"img-card-top\" src={firstImage ? firstImage.url: defaultImage.url} alt=\"\" style={{height: '100px', width: '100px'}}/>\n\n        <h4 className=\"text-primary\">\n          @{username}\n        </h4>\n        <hr />\n        <small>{about}</small>\n      </div>\n    </div>\n  )\n}\n\nexport default UserCard\n","import React, { useEffect } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { ALL_USERS_QUERY } from '../graphql/queries'\nimport { toast } from 'react-toastify'\nimport Loader from '../Components/Loader'\nimport UserCard from '../Components/UserCard'\nimport { Link } from 'react-router-dom'\n\nconst Users = () => {\n  const { data, loading, error } = useQuery(ALL_USERS_QUERY)\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  return (\n    <div className=\"row\">\n      {\n        loading ? <Loader /> : ''\n      }\n      {\n        data && data.allUsers ? data.allUsers.map(user => {\n          return <div className=\"col-md-2\" key={`user-` + user._id}>\n            <Link to={`/users/${user.username}`}>\n              <UserCard user={user} ></UserCard>\n            </Link>\n          </div>\n        }) : ''\n      }\n    </div>\n  )\n}\n\nexport default Users\n","import React, { useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport { PUBLIC_PROFILE_QUERY } from '../graphql/queries'\nimport { toast } from 'react-toastify'\nimport Loader from '../Components/Loader'\nimport { useQuery } from '@apollo/client'\n\nconst SingleUser = () => {\n  const { username } = useParams()\n  const { data, loading, error } = useQuery(PUBLIC_PROFILE_QUERY, { variables: { username: username } })\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  return (\n    <div>\n      {\n        loading ? <Loader /> : ''\n      }\n      {\n        data\n          ? <div className=\"jumbotron\">\n            <h1 className=\"display-4\">{data.publicProfile.name}</h1>\n            <p className=\"lead\">@{data.publicProfile.username}</p>\n            <hr className=\"my-4\" />\n            <p>{data.publicProfile.about}</p>\n            <h4>Photos of {data.publicProfile.name}</h4>\n            {\n              data.publicProfile.images.map(({ url }) => <img style={{height: '100px', width: '100px'}} className=\"img-thumbnail\" alt=\"\" src={url}/>)\n            }\n          </div>\n          : ''\n      }\n    </div>\n  )\n}\n\n\nexport default SingleUser\n","import React, { Fragment, useState } from 'react'\nimport FileResizer from 'react-image-file-resizer'\nimport { useAuthHttp } from '../../util/http';\nimport { toast } from 'react-toastify';\n\nconst CreateUpdatePostForm = ({ title, content, image, setTitle, setContent, setImage, handleSubmit, loading}) => {\n  const [processingImage, setProcessingImage] = useState(false)\n  const http = useAuthHttp()\n  const handleImageUpload = (event) => {\n    setProcessingImage(true)\n    var fileInput = false\n    if (event.target.files[0]) {\n      fileInput = true\n    }\n    if (fileInput) {\n      FileResizer.imageFileResizer(\n        event.target.files[0],\n        300,\n        200,\n        'JPEG',\n        100,\n        0,\n        async (output) => {\n          try {\n            const { data } = await http.post(`${process.env.REACT_APP_SERVER_URL}/uploadImages`,\n              { image: output })\n            setImage(data)\n            toast.info('Uploaded')\n            setProcessingImage(false)\n          } catch (error) {\n            toast.error(error.message)\n            setProcessingImage(false)\n          }\n        },\n        'base64'\n      );\n    }\n  }\n  const deleteImageHandler = async (id) => {\n    setProcessingImage(true)\n    try {\n      const { data } = await http.post(`${process.env.REACT_APP_SERVER_URL}/removeImage`,\n        { public_id: id })\n      if (data.success) {\n        console.log('setting image to null')\n        setImage(null)\n        toast.info('Deleted')\n      } else {\n        // toast.error(data.error.message)\n        // even if we are unable to delete it from cloudinary we can unlink it from our db\n        setImage(null)\n      }\n      setProcessingImage(false)\n    } catch (error) {\n      toast.error(error.message)\n      setProcessingImage(false)\n    }\n  }\n  return (\n    <Fragment>\n      {processingImage\n        ? \"Please Wait...\"\n        : image\n          ? <div className=\"row\">\n            <div className=\"col-md-4\">\n              <div className=\"overlay-container\">\n                <img style={{ height: '300px', width: '100%' }} src={image.url} alt={image.public_id} className=\"img-thumbnail float-right\"></img>\n                <div className=\"overlay\">\n                  <div className=\"overlay-contents\">\n                    <button onClick={() => deleteImageHandler(image.public_id)} type=\"button\" className=\"btn btn-raised btn-success\">Delete</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          : <label htmlFor=\"upload\">\n            <span className=\"btn btn-default btn-raised\">Upload Image</span>\n            <input type=\"file\" hidden onChange={handleImageUpload} id=\"upload\" />\n          </label>\n      }\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"title\">Title</label>\n          <input type=\"text\" placeholder=\"Enter Title\" className=\"form-control\" id=\"title\"\n            value={title}\n            onChange={e => setTitle(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"content\">Content</label>\n          <textarea rows=\"3\" placeholder=\"Write Something Here\" className=\"form-control\" id=\"content\"\n            value={content}\n            onChange={e => setContent(e.target.value)}\n          />\n        </div>\n        <button disabled={!title || !content || loading || processingImage} className=\"btn btn-raised btn-success\">Submit</button>\n      </form>\n    </Fragment>\n  )\n}\n\nexport default CreateUpdatePostForm\n","import React, { useState } from 'react'\nimport CreateUpdatePostForm from '../Components/forms/CreateUpdatePostForm'\nimport { useMutation } from '@apollo/client';\nimport { POST_CREATE } from '../graphql/mutations';\nimport Loader from '../Components/Loader';\nimport { toast } from 'react-toastify';\n// import { GET_POSTS_QUERY, GET_CURRENT_USER_POSTS_QUERY, TOTAL_POSTS } from '../graphql/queries';\n// import { useHistory } from 'react-router';\n\nconst CreatePost = () => {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [image, setImage] = useState(null);\n  const [loading, setLoading] = useState(false);\n  // const history = useHistory();\n\n  const [createPost] = useMutation(POST_CREATE, {\n    update: (cache) => {\n      //cache.reset()\n    },\n    // refetchQueries: [\n    //   { query: GET_POSTS_QUERY },\n    //   { query:TOTAL_POSTS },\n    //   { query: GET_CURRENT_USER_POSTS_QUERY }]\n    // update: (cache, { data: { postCreate } }) => {\n    //   const {postsByCurrentUser} = cache.readQuery({ query: GET_CURRENT_USER_POSTS_QUERY })\n    //   const {allPosts} = cache.readQuery({ query: GET_POSTS_QUERY })\n    //   console.log(\"==============>\", postsByCurrentUser, allPosts)\n    //   cache.writeQuery({\n    //     query: GET_CURRENT_USER_POSTS_QUERY,\n    //     data: {\n    //       postsByCurrentUser: [postCreate, ...postsByCurrentUser]\n    //     }\n    //   })\n    //   cache.writeQuery({\n    //     query: GET_POSTS_QUERY,\n    //     data: {\n    //       allPosts: [postCreate, ...allPosts]\n    //     }\n    //   })\n    // }\n  });\n  const handleSubmit = async (e) => {\n    setLoading(true)\n    e.preventDefault()\n    try {\n      await createPost({\n        variables: {\n          input: { title, content, image }\n        }\n      })\n      toast.success('Post Created')\n      setLoading(false)\n      setTitle('')\n      setContent('')\n      setImage(null)\n      //history.push('/dashboard/user-posts')\n    } catch (error) {\n      toast.error(error.message)\n      console.log()\n      setLoading(false)\n    }\n\n  }\n  return (\n    <div>\n      {\n        loading ? <Loader /> : <CreateUpdatePostForm {...{ title, setTitle, content, image, setContent, setImage, handleSubmit }} />\n      }\n\n    </div>\n  )\n}\n\nexport default CreatePost\n","import React, { useEffect } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { useParams } from 'react-router'\nimport { SINGLE_POST } from '../graphql/queries';\nimport Loader from '../Components/Loader';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst ViewPost = () => {\n  const { _id } = useParams();\n  const { data, loading, error } = useQuery(SINGLE_POST, {\n    variables: {\n      _id: _id\n    }\n  })\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  return (\n    <div className=\"container\">\n      {\n        loading ? <Loader />\n          : <div className=\"jumbotron\">\n            <img style={{ width: '800px' }} src={data.singlePost.image.url} alt=\"\" />\n            <h1 className=\"m-auto display-4\">{data.singlePost.title}</h1>\n            <p className=\"lead\">By: <Link to={`/users/${data.singlePost.postedBy.username}`}>{data.singlePost.postedBy.name}</Link></p>\n            <hr className=\"my-4\" />\n            <p className=\"lead\">\n              {data.singlePost.content}\n            </p>\n          </div>\n      }\n    </div>\n  )\n}\n\nexport default ViewPost\n","import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport { useQuery, useMutation } from '@apollo/client';\nimport { SINGLE_POST, GET_CURRENT_USER_POSTS_QUERY, GET_POSTS_QUERY } from '../graphql/queries';\nimport { toast } from 'react-toastify';\nimport Loader from '../Components/Loader';\nimport CreateUpdatePostForm from '../Components/forms/CreateUpdatePostForm';\nimport { UPDATE_POST } from '../graphql/mutations';\nimport omitDeep from 'omit-deep-lodash'\n\n\nconst EditPost = () => {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [image, setImage] = useState(null);\n  const [submitting, setSubmitting] = useState(false)\n\n  const { _id } = useParams()\n  const { data, loading, error } = useQuery(SINGLE_POST, {\n    variables: {\n      _id: _id\n    }\n  })\n  const [updatePost] = useMutation(UPDATE_POST)\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n    if (data) {\n      console.log('setting initial data....')\n      setTitle(data.singlePost.title)\n      setContent(data.singlePost.content)\n      if (!data.singlePost.image.url.includes('placeholder')) {\n        setImage(data.singlePost.image)\n      }\n    }\n  }, [data, error])\n  const handleSubmit = async (e) => {\n    setSubmitting(true)\n    e.preventDefault()\n    try {\n      await updatePost({\n        variables: {\n          _id,\n          input: {\n            title,\n            content,\n            image: omitDeep(image, ['__typename'])\n          }\n        },\n        refetchQueries: [{ query: GET_CURRENT_USER_POSTS_QUERY }, { query: GET_POSTS_QUERY }]\n      })\n      toast.success('Updated Post')\n      setSubmitting(false)\n    } catch (error) {\n      toast.error(error.message)\n      setSubmitting(false)\n    }\n\n  }\n  return (\n    <div>\n      <h4>Edit Post</h4>\n      {\n        loading || submitting ? <Loader /> : <CreateUpdatePostForm {...{ title, setTitle, content, image, setContent, setImage, handleSubmit }} />\n      }\n    </div>\n  )\n}\n\nexport default EditPost\n","import React, { useEffect } from 'react'\nimport { useParams } from 'react-router'\nimport { useQuery } from '@apollo/client';\nimport { SEARCH_POSTS } from '../graphql/queries';\nimport { toast } from 'react-toastify';\nimport Loader from '../Components/Loader';\nimport Posts from '../Components/Posts';\n\nconst SearchResults = () => {\n  const { keyword } = useParams();\n  const { data, error, loading } = useQuery(SEARCH_POSTS, {\n    variables: {\n      keyword\n    }\n  });\n  useEffect(() => {\n    if (error) {\n      toast.error(error.message)\n    }\n  }, [error])\n  return (\n    <div>\n      Search Results for \"{keyword}\"\n      {\n        loading\n          ? <Loader />\n          : data ? <Posts posts={data.searchPosts}></Posts> : ''\n      }\n    </div>\n  )\n}\n\nexport default SearchResults\n","import React, { useContext } from 'react';\nimport { ApolloClient, ApolloProvider, InMemoryCache, createHttpLink, split } from '@apollo/client';\nimport { WebSocketLink } from '@apollo/client/link/ws';\nimport { getMainDefinition } from '@apollo/client/utilities';\nimport { setContext } from '@apollo/client/link/context';\nimport { Switch, Route } from 'react-router';\nimport Home from './pages/Home';\nimport Navbar from './Components/Navbar';\nimport Register from './pages/auth/Register';\nimport Login from './pages/auth/Login';\nimport CompleteRegistration from './pages/auth/CompleteRegistration';\nimport { ToastContainer } from 'react-toastify';\nimport { AuthContext } from './context/AuthContext';\nimport ForgotPassword from './pages/auth/ForgotPassword';\nimport PrivateRoute from './Components/PrivateRoute';\nimport Dashboard from './pages/Dashboard';\nimport 'react-toastify/dist/ReactToastify.css';\nimport PublicRoute from './Components/PublicRoute';\nimport Users from './pages/Users';\nimport SingleUser from './pages/SingleUser';\nimport CreatePost from './pages/CreatePost';\nimport ViewPost from './pages/ViewPost';\nimport EditPost from './pages/EditPost';\nimport SearchResults from './pages/SearchResults';\n\nfunction App() {\n  const { state } = useContext(AuthContext);\n  const { user } = state;\n\n  const wsLink = new WebSocketLink({\n  uri: `${process.env.REACT_APP_SERVER_WS_URL}/graphql`,\n  options: {\n    reconnect: true,\n    connectionParams: {\n      authtoken: user? user.token : ''\n    }\n  }\n});\n  const httpLink = createHttpLink({\n    uri: `${process.env.REACT_APP_SERVER_URL}/graphql`\n  });\n\n  const authLink = setContext((_, { headers }) => {\n    // return the headers to the context so httpLink can read them\n    return {\n      headers: {\n        ...headers,\n        authtoken: user? user.token : ''\n      }\n    }\n  });\n\n  const link = split(\n    // split based on operation type\n    ({ query }) => {\n      const definition = getMainDefinition(query);\n      return (\n        definition.kind === 'OperationDefinition' &&\n        definition.operation === 'subscription'\n      );\n    },\n    wsLink,\n    authLink.concat(httpLink)\n  );\n\n  const client = new ApolloClient({\n    link,\n    cache: new InMemoryCache()\n  });\n  return (\n    <ApolloProvider client={client}>\n      <React.Fragment>\n        <Navbar></Navbar>\n        <ToastContainer />\n        <div className=\"container-fluid p-5\">\n          <Switch>\n            <PublicRoute exact path={\"/login\"}>\n              <Login></Login>\n            </PublicRoute>\n            <PublicRoute exact path={\"/register\"}>\n              <Register></Register>\n            </PublicRoute>\n            <PublicRoute exact path={\"/complete-register\"}>\n              <CompleteRegistration />\n            </PublicRoute>\n            <PublicRoute exact path={\"/forgot-password\"}>\n              <ForgotPassword/>\n            </PublicRoute>\n            <PrivateRoute path={\"/dashboard\"}>\n              <Dashboard/>\n            </PrivateRoute>\n            <PrivateRoute path={\"/create-post\"}>\n              <CreatePost/>\n            </PrivateRoute>\n            <PrivateRoute path={\"/edit-post/:_id\"}>\n              <EditPost/>\n            </PrivateRoute>\n            <Route path={\"/users/:username\"}>\n              <SingleUser/>\n            </Route>\n            <Route path={\"/users\"}>\n              <Users/>\n            </Route>\n            <Route path={\"/posts/:_id\"}>\n              <ViewPost/>\n            </Route>\n            <Route path={\"/search/:keyword\"}>\n              <SearchResults/>\n            </Route>\n            <Route path={\"/token\"}>\n              {state && state.user && state.user.token}\n            </Route>\n            <Route path={\"/\"}>\n              <Home></Home>\n            </Route>\n          </Switch>\n        </div>\n      </React.Fragment>\n    </ApolloProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport { AuthProvider } from './context/AuthContext';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <AuthProvider>\n        <App />\n      </AuthProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"full\":\"Loader_full__Rnuvt\",\"background\":\"Loader_background__XKUro\",\"loaderContainer\":\"Loader_loaderContainer__1ehac\",\"bounce\":\"Loader_bounce__2J07n\",\"yellow\":\"Loader_yellow__3CWid\",\"red\":\"Loader_red__2xz5W\",\"blue\":\"Loader_blue__3EGtr\",\"violet\":\"Loader_violet__1zwuB\"};","const { gql } = require(\"@apollo/client\");\n\nexport const USER_INFO = gql`\nfragment userInfo on User {\n  _id\n  name\n  username\n  email\n  about\n  images {\n    url,\n    public_id\n  }\n}\n`\nexport const POST_DATA = gql`\nfragment postData on Post {\n  _id,\n  title,\n  content,\n  postedBy {\n    _id\n    username,\n    name\n  },\n  image {\n    url\n    public_id\n  }\n}\n`"],"sourceRoot":""}